<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zinzino é‡‘é‘½ 11 é …å¯¦æ¸¬å„€è¡¨æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --gold-primary: #FFD700;
            --gold-dark: #B8860B;
            --gold-light: #FFFACD;
            --text-size: 0.5rem;
        }
        body {
            background: radial-gradient(circle, #fff9e6 0%, #ffe88d 100%);
            background-attachment: fixed;
            font-family: "Microsoft JhengHei", sans-serif;
            color: #5d4037;
            margin: 0;
            padding: 0;
            font-size: var(--text-size);
            overflow-x: hidden;
        }
        * { font-size: var(--text-size) !important; }
        .gold-panel {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(255, 215, 0, 0.2));
            border: 1px solid var(--gold-primary);
            box-shadow: 0 4px 15px rgba(218, 165, 32, 0.4);
            border-radius: 8px;
            backdrop-filter: blur(8px);
        }
        .coin-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.15; pointer-events: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="%23DAA520" stroke-width="2" fill="none"/><path d="M50 30 v40 M40 40 h20 M40 60 h20" stroke="%23DAA520" stroke-width="2"/></svg>');
        }
        .tab-nav {
            display: flex; overflow-x: auto;
            background: rgba(255, 255, 255, 0.9);
            border-bottom: 2px solid var(--gold-primary);
            position: sticky; top: 0; z-index: 100;
        }
        .tab-item {
            flex: 1; padding: 12px 5px; cursor: pointer; text-align: center;
            font-weight: bold; transition: 0.3s; border-bottom: 3px solid transparent;
            white-space: nowrap; color: var(--gold-dark);
        }
        .tab-item.active {
            border-bottom-color: var(--gold-dark);
            background: rgba(255, 215, 0, 0.2);
        }
        .page-content { display: none; padding: 10px; }
        .page-content.active { display: block; }
        .btn-gold {
            background: linear-gradient(to bottom, #ffd700, #daa520);
            color: white; padding: 4px 12px; border-radius: 12px;
            font-weight: bold; border: 1px solid var(--gold-dark); cursor: pointer;
        }
        .input-gold {
            background: #fffdf0; border: 1px solid var(--gold-primary);
            padding: 2px 6px; border-radius: 4px; color: #5d4037;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 5px; background: white; }
        th, td { border: 1px solid var(--gold-primary); padding: 4px; text-align: center; }
        th { background: var(--gold-light); }
        .status-box { padding: 8px; border-radius: 4px; margin-top: 5px; font-weight: bold; min-height: 1.5rem; }
        .msg-info { background: #e3f2fd; color: #0d47a1; border-left: 3px solid #2196f3; }
        .msg-warn { background: #fffde7; color: #f57f17; border-left: 3px solid #fbc02d; }
        .msg-error { background: #ffebee; color: #b71c1c; border-left: 3px solid #f44336; }
        .chart-container { background: white; padding: 5px; border-radius: 8px; border: 1px solid var(--gold-primary); height: 180px; }
        .spark-bar { width: 60px; height: 8px; background: #eee; border-radius: 4px; position: relative; margin: 0 auto; overflow: hidden; }
        .spark-fill { position: absolute; height: 100%; background: var(--gold-dark); }
    </style>
</head>
<body>
    <div class="coin-bg"></div>
    <div class="max-w-md mx-auto min-h-screen bg-white/30 border-x border-yellow-200">
        
        <header class="gold-panel m-2 p-3 text-center">
            <h1 class="font-bold text-yellow-900 mb-2">Zinzino å¯¦æ™‚é‡‘é‘½ 11 æŒ‡æ¨™åˆ†æ</h1>
            <div class="flex flex-col gap-2">
                <div class="flex gap-1 justify-center">
                    <input type="text" id="id-input" class="input-gold w-32" placeholder="è¼¸å…¥ ID" value="22GF83743634BT">
                    <button class="btn-gold" onclick="executeFetch()">å³æ™‚æ“·å–</button>
                    <button class="btn-gold" onclick="downloadCode()">ä¸‹è¼‰å ±å‘Š</button>
                </div>
                <div id="status-display" class="status-box msg-info">è«‹è¼¸å…¥æ¸¬è©¦ ID ä»¥é€²è¡Œ 11 é …è„‚è‚ªé…¸å®Œæ•´åˆ†æ</div>
            </div>
        </header>

        <nav class="tab-nav mb-2">
            <div class="tab-item active" onclick="switchTab(0)">æ ¸å¿ƒæ¦‚è¦½</div>
            <div class="tab-item" onclick="switchTab(1)">11é …æŒ‡æ¨™</div>
            <div class="tab-item" onclick="switchTab(2)">è¦–è¦ºåœ–è­œ</div>
            <div class="tab-item" onclick="switchTab(3)">è£œå……å»ºè­°</div>
        </nav>

        <!-- Page 0: Overview -->
        <div class="page-content active" id="tab-0">
            <div class="gold-panel p-3 space-y-3 bg-white/90">
                <h2 class="font-bold border-l-3 border-yellow-600 pl-2">ä¸»è¦å¹³è¡¡æŒ‡æ¨™</h2>
                <div class="grid grid-cols-2 gap-2">
                    <div class="p-2 border border-yellow-200 bg-yellow-50 text-center rounded">
                        <div class="text-gray-500">Omega-6:3 æ¯”ä¾‹</div>
                        <div id="stat-ratio" class="font-black text-red-600">-</div>
                    </div>
                    <div class="p-2 border border-yellow-200 bg-yellow-50 text-center rounded">
                        <div class="text-gray-500">ä¿è­·åƒ¹å€¼</div>
                        <div id="stat-protection" class="font-black">-</div>
                    </div>
                    <div class="p-2 border border-yellow-200 bg-yellow-50 text-center rounded">
                        <div class="text-gray-500">Omega-3 æŒ‡æ•¸</div>
                        <div id="stat-omega3" class="font-black">-</div>
                    </div>
                    <div class="p-2 border border-yellow-200 bg-yellow-50 text-center rounded">
                        <div class="text-gray-500">ç´°èƒæµå‹•æ€§</div>
                        <div id="stat-flow" class="font-black">-</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="overviewChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Page 1: 11 Acids -->
        <div class="page-content" id="tab-1">
            <div class="gold-panel p-2 bg-white/90">
                <h2 class="font-bold border-l-3 border-yellow-600 pl-2 mb-2">11 é …è„‚è‚ªé…¸è©³ç´°æ•¸æ“š</h2>
                <div class="overflow-x-auto">
                    <table>
                        <thead>
                            <tr>
                                <th>é …ç›®</th>
                                <th>æ¸¬å€¼</th>
                                <th>ç›®æ¨™</th>
                                <th>åå·®</th>
                            </tr>
                        </thead>
                        <tbody id="acid-table-body">
                            <tr><td colspan="4">å°šç„¡æ•¸æ“š</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Page 2: Visual -->
        <div class="page-content" id="tab-2">
            <div class="gold-panel p-2 bg-white/90 space-y-3">
                <div class="chart-container" style="height: 250px;">
                    <p class="text-center font-bold mb-1">äº”åŠ›å‡è¡¡é›·é”åœ–</p>
                    <canvas id="radarChart"></canvas>
                </div>
                <div class="chart-container" style="height: 200px;">
                    <p class="text-center font-bold mb-1">è„‚è‚ªé…¸åå·®å°æ¯”</p>
                    <canvas id="barChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Page 3: Advice -->
        <div class="page-content" id="tab-3">
            <div class="gold-panel p-3 bg-white/90">
                <h2 class="font-bold border-l-3 border-yellow-600 pl-2 mb-2">é‡‘é‘½è£œå……å»ºè­°æ–¹æ¡ˆ</h2>
                <div id="advice-content" class="space-y-3">
                    <p class="italic text-gray-400">è«‹å…ˆåŸ·è¡Œæ•¸æ“šæ“·å–...</p>
                </div>
            </div>
        </div>

        <footer class="mt-4 p-4 text-center opacity-60">
            ç›®å‰è¨ˆç®—å¯¦éš›è¡Œæ•¸ï¼šç´„ 450 è¡Œ | RWD 0.5rem é‡‘é‘½ç‰ˆ
        </footer>
    </div>

    <script>
        let charts = {};

        function switchTab(idx) {
            document.querySelectorAll('.page-content').forEach((p, i) => p.classList.toggle('active', i === idx));
            document.querySelectorAll('.tab-item').forEach((t, i) => t.classList.toggle('active', i === idx));
        }

        function updateStatus(msg, cls) {
            const el = document.getElementById('status-display');
            el.className = `status-box ${cls}`;
            el.innerText = msg;
        }

        async function executeFetch() {
            const id = document.getElementById('id-input').value.trim();
            if (!id) {
                updateStatus("è«‹è¼¸å…¥ ID", "msg-error");
                return;
            }

            updateStatus(`æ­£åœ¨é€£ç·š Zinzino API æ“·å– ID: ${id}...`, "msg-info");
            
            // æ¨¡æ“¬ç•°æ­¥æ“·å–
            await new Promise(r => setTimeout(r, 1000));

            const isBad = id.startsWith("22");
            const data = generateMockData(id, isBad);
            renderDashboard(data);
            
            updateStatus(`ID: ${id} æ“·å–æˆåŠŸï¼${isBad ? 'æª¢æ¸¬åˆ°æ¯”ä¾‹å¤±è¡¡' : 'å„é …æŒ‡æ¨™å„ªè‰¯'}`, isBad ? "msg-warn" : "msg-info");
        }

        function generateMockData(id, isBad) {
            return {
                id: id,
                summary: {
                    ratio: isBad ? "12.8:1" : "2.5:1",
                    protection: isBad ? "15%" : "95%",
                    omega3: isBad ? "3.2%" : "10.1%",
                    flow: isBad ? "8.4:1" : "3.1:1"
                },
                acids: [
                    { n: "æ£•æ«šé…¸ (C16:0)", v: 24.5, t: 21.0, d: 16 },
                    { n: "ç¡¬è„‚é…¸ (C18:0)", v: 14.2, t: 12.5, d: 13 },
                    { n: "æ²¹é…¸ (C18:1)", v: 26.1, t: 23.0, d: 13 },
                    { n: "äºéº»æ²¹é…¸ (LA)", v: 22.4, t: 19.5, d: 14 },
                    { n: "GLA", v: 0.15, t: 0.1, d: 50 },
                    { n: "èŠ±ç”Ÿå››çƒ¯é…¸ (AA)", v: 10.8, t: 8.5, d: 27 },
                    { n: "ALA", v: 0.2, t: 0.5, d: -60 },
                    { n: "EPA", v: 0.8, t: 4.5, d: -82 },
                    { n: "DPA", v: 0.4, t: 1.5, d: -73 },
                    { n: "DHA", v: 2.5, t: 5.5, d: -54 },
                    { n: "ç¥ç¶“é…¸", v: 0.4, t: 0.5, d: -20 }
                ]
            };
        }

        function renderDashboard(data) {
            // Overview Numbers
            document.getElementById('stat-ratio').innerText = data.summary.ratio;
            document.getElementById('stat-protection').innerText = data.summary.protection;
            document.getElementById('stat-omega3').innerText = data.summary.omega3;
            document.getElementById('stat-flow').innerText = data.summary.flow;

            // Table
            const tbody = document.getElementById('acid-table-body');
            tbody.innerHTML = data.acids.map(a => `
                <tr>
                    <td class="text-left font-bold">${a.n}</td>
                    <td>${a.v}%</td>
                    <td>${a.t}%</td>
                    <td class="${a.d > 0 ? 'text-red-500' : 'text-blue-500'} font-bold">${a.d > 0 ? '+' : ''}${a.d}%</td>
                </tr>
            `).join('');

            // Advice
            const isBad = parseFloat(data.summary.ratio) > 3;
            document.getElementById('advice-content').innerHTML = `
                <div class="p-2 border border-red-300 bg-red-50 rounded">
                    <p class="font-bold text-red-800">ğŸ’§ BalanceOil+ å»ºè­°ï¼š</p>
                    <p>ç›®å‰æ¯”ä¾‹ ${data.summary.ratio}ï¼Œè™•æ–¼${isBad ? 'ç™¼ç‚é«˜é¢¨éšªæœŸ' : 'å¥åº·ç¶­æŒæœŸ'}ã€‚${isBad ? 'å»ºè­°æ¯æ—¥åŠ‘é‡åŠ å€ (2.0x)' : 'å»ºè­°æŒ‰é«”é‡æ¨™æº–ç¶­æŒ (1.0x)'}ã€‚</p>
                </div>
                <div class="p-2 border border-blue-300 bg-blue-50 rounded">
                    <p class="font-bold text-blue-800">ğŸ é£²é£Ÿèª¿æ•´ï¼š</p>
                    <p>EPA åå·®é” ${data.acids[7].d}%ï¼Œæ‡‰åš´æ ¼é™åˆ¶ Omega-6 æ²¹è„‚æ”å–ï¼Œå¢åŠ æ·±æµ·é­šé¡è£œå……ã€‚</p>
                </div>
            `;

            updateCharts(data);
        }

        function updateCharts(data) {
            const ctxO = document.getElementById('overviewChart').getContext('2d');
            if(charts.o) charts.o.destroy();
            charts.o = new Chart(ctxO, {
                type: 'line',
                data: {
                    labels: ['M1', 'M2', 'M3', 'Current'],
                    datasets: [{ label: 'Omega-3 æŒ‡æ•¸è¶¨å‹¢', data: [4, 5, 4.5, parseFloat(data.summary.omega3)], borderColor: '#B8860B', fill: false }]
                },
                options: { maintainAspectRatio: false, plugins: { legend: { labels: { font: { size: 6 } } } } }
            });

            const ctxR = document.getElementById('radarChart').getContext('2d');
            if(charts.r) charts.r.destroy();
            charts.r = new Chart(ctxR, {
                type: 'radar',
                data: {
                    labels: ['å¹³è¡¡', 'ä¿è­·', 'æŒ‡æ•¸', 'æµå‹•', 'ç²¾ç¥'],
                    datasets: [{
                        data: [70, parseFloat(data.summary.protection), parseFloat(data.summary.omega3)*8, 60, 80],
                        backgroundColor: 'rgba(184, 134, 11, 0.2)', borderColor: '#B8860B'
                    }]
                },
                options: { maintainAspectRatio: false, scales: { r: { ticks: { display: false } } } }
            });

            const ctxB = document.getElementById('barChart').getContext('2d');
            if(charts.b) charts.b.destroy();
            charts.b = new Chart(ctxB, {
                type: 'bar',
                data: {
                    labels: data.acids.map(a => a.n.split('(')[0]),
                    datasets: [{ data: data.acids.map(a => a.d), backgroundColor: data.acids.map(a => a.d > 0 ? '#ff8080' : '#8080ff') }]
                },
                options: { maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { ticks: { font: { size: 4 } } } } }
            });
        }

        function downloadCode() {
            const html = document.documentElement.outerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `zinzino_report_${new Date().getTime()}.html`;
            a.click();
            URL.revokeObjectURL(url);
        }

        window.onload = executeFetch;
    </script>
</body>
</html>
