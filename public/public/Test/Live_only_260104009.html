<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">

<title>é‡‘è¼å’–å•¡å»³ V30X â€“ Product Master Edition</title>

<!-- =====================================================
     UI LIB (ONLY Tailwind)
===================================================== -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
/* =====================================================
   00. ROOT / THEME
===================================================== */
:root{
  --gold:#fbbf24;
  --gold-soft:#fde68a;
  --deep:#451a03;
  --bg:#fff7ed;
  --panel:rgba(255,255,255,0.94);
  --shadow:0 10px 35px rgba(0,0,0,.25);
}

/* =====================================================
   01. RESET
===================================================== */
*{ box-sizing:border-box; }
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:var(--bg);
  color:var(--deep);
  font-family:
    "PingFang TC",
    "Noto Sans TC",
    "Microsoft JhengHei",
    system-ui,sans-serif;
}

/* =====================================================
   02. MODE STATES
===================================================== */
body.mobile-mode{ font-size:15px; }
body.desktop-mode{ font-size:14px; }

body.onehand-mode .main-ui{
  width:220px;
  left:8px;
  bottom:8px;
  top:auto;
  border-radius:18px;
  box-shadow:var(--shadow);
}

/* =====================================================
   03. MAIN UI
===================================================== */
.main-ui{
  position:fixed;
  top:0;left:0;
  width:100%;
  background:var(--panel);
  z-index:5000;
}

.ui-section{
  border-bottom:1px solid rgba(0,0,0,.08);
}

.ui-row{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  padding:6px;
}

.btn{
  padding:4px 10px;
  border-radius:10px;
  border:1px solid var(--deep);
  background:white;
  font-weight:800;
  cursor:pointer;
  user-select:none;
}
.btn:active{ transform:scale(.96); }

/* =====================================================
   04. STAGE
===================================================== */
.stage{
  position:fixed;
  inset:0;
  overflow:hidden;
  z-index:10;
}

/* =====================================================
   05. CHARACTER CONTAINER
===================================================== */
.character{
  position:absolute;
  left:18vw;
  top:16vh;
  width:64vw;
  height:72vh;
  pointer-events:auto;
}

.character-inner{
  width:100%;
  height:100%;
  border-radius:26px;
  background:linear-gradient(135deg,var(--gold-soft),var(--gold));
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6vw;
  font-weight:900;
  user-select:none;
  transform-origin:center bottom;
}

/* =====================================================
   06. SUBTITLE
===================================================== */
.subtitle{
  position:absolute;
  left:50%;
  top:70%;
  transform:translateX(-50%);
  background:white;
  border:2px solid var(--deep);
  border-radius:16px;
  padding:10px 20px;
  font-weight:900;
  max-width:92vw;
  pointer-events:auto;
  z-index:200;
}

/* =====================================================
   07. GUIDE LINES
===================================================== */
.guide{
  position:fixed;
  left:0;
  width:100%;
  border-top:2px dashed rgba(0,0,0,.25);
  pointer-events:none;
  display:none;
  z-index:100;
}

/* =====================================================
   08. ACTION ANIMATIONS
===================================================== */
@keyframes breathe{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.03); }
  100%{ transform:scale(1); }
}
@keyframes talk{
  0%{ transform:scaleY(1); }
  50%{ transform:scaleY(.95); }
  100%{ transform:scaleY(1); }
}
@keyframes nod{
  0%{ transform:translateY(0); }
  35%{ transform:translateY(10px); }
  100%{ transform:translateY(0); }
}
@keyframes wave{
  0%{ transform:rotate(0deg); }
  50%{ transform:rotate(5deg); }
  100%{ transform:rotate(0deg); }
}

/* =====================================================
   09. TRANSITION HELPERS
===================================================== */
.fade-in{ animation:fadeIn .5s ease; }
@keyframes fadeIn{
  from{ opacity:0; }
  to{ opacity:1; }
}
</style>
</head>

<body class="mobile-mode">

<!-- =====================================================
     UI PANEL
===================================================== -->
<div class="main-ui">

  <!-- DEVICE -->
  <div class="ui-section">
    <div class="ui-row">
      <div class="btn" onclick="toggleDevice()">ğŸ“± / ğŸ–¥ è£ç½®</div>
      <div class="btn" onclick="toggleOneHand()">ğŸ™ å–®æ‰‹ç›´æ’­</div>
    </div>
  </div>

  <!-- SUBTITLE -->
  <div class="ui-section">
    <div class="ui-row">
      <div class="btn" onclick="snapSubtitle('bottom')">ğŸ§² åº•éƒ¨</div>
      <div class="btn" onclick="snapSubtitle('golden')">âœ¨ é»ƒé‡‘</div>
      <div class="btn" onclick="freeSubtitle()">ğŸ”“ è‡ªç”±</div>
    </div>
  </div>

  <!-- ACTION -->
  <div class="ui-section">
    <div class="ui-row">
      <div class="btn" onclick="setAction('idle')">ğŸ˜ å¾…æ©Ÿ</div>
      <div class="btn" onclick="setAction('talk')">ğŸ—£ èªªè©±</div>
      <div class="btn" onclick="setAction('breathe')">ğŸŒ¬ å‘¼å¸</div>
      <div class="btn" onclick="setAction('nod')">ğŸ™‚ é»é ­</div>
      <div class="btn" onclick="setAction('wave')">ğŸ‘‹ æ®æ‰‹</div>
    </div>
  </div>

  <!-- SCENE -->
  <div class="ui-section">
    <div class="ui-row">
      <div class="btn" onclick="enterChar()">â¡ å…¥å ´</div>
      <div class="btn" onclick="exitChar()">â¬… é›¢å ´</div>
      <div class="btn" onclick="resetAll()">â™» é‡ç½®</div>
    </div>
  </div>

</div>

<!-- =====================================================
     GUIDES
===================================================== -->
<div id="guide-bottom" class="guide" style="bottom:100px"></div>
<div id="guide-golden" class="guide" style="top:38%"></div>

<!-- =====================================================
     STAGE
===================================================== -->
<div class="stage">

  <!-- CHARACTER -->
  <div id="char" class="character">
    <div id="charInner" class="character-inner">
      â˜•
    </div>
  </div>

  <!-- SUBTITLE -->
  <div id="subtitle" class="subtitle">
    é‡‘è¼å’–å•¡å»³ï½œç›´æ’­æº–å‚™å®Œæˆ
  </div>

</div>

<script>
/* =====================================================
   GLOBAL STATE
===================================================== */
let deviceMode="mobile";
let oneHand=false;
let subtitleSnap=null;
let currentAction="idle";

/* =====================================================
   MODE CONTROL
===================================================== */
function toggleDevice(){
  deviceMode = deviceMode==="mobile"?"desktop":"mobile";
  applyBodyClass();
}
function toggleOneHand(){
  oneHand=!oneHand;
  applyBodyClass();
}
function applyBodyClass(){
  document.body.className =
    deviceMode+"-mode"+(oneHand?" onehand-mode":"");
}

/* =====================================================
   SUBTITLE SNAP
===================================================== */
const subtitle=document.getElementById("subtitle");

function snapSubtitle(mode){
  subtitleSnap=mode;
  hideGuides();
  if(mode==="bottom"){
    showGuide("guide-bottom");
    subtitle.style.left="50%";
    subtitle.style.bottom="100px";
    subtitle.style.top="auto";
    subtitle.style.transform="translateX(-50%)";
  }
  if(mode==="golden"){
    showGuide("guide-golden");
    subtitle.style.left="50%";
    subtitle.style.top="38%";
    subtitle.style.bottom="auto";
    subtitle.style.transform="translateX(-50%)";
  }
}
function freeSubtitle(){
  subtitleSnap=null;
  hideGuides();
}
function hideGuides(){
  document.querySelectorAll(".guide")
    .forEach(g=>g.style.display="none");
}
function showGuide(id){
  document.getElementById(id).style.display="block";
}

/* =====================================================
   CHARACTER ACTION FSM
===================================================== */
const charInner=document.getElementById("charInner");

function clearAction(){
  charInner.style.animation="";
}
function setAction(action){
  currentAction=action;
  clearAction();

  if(action==="talk")
    charInner.style.animation="talk .4s infinite";
  if(action==="breathe")
    charInner.style.animation="breathe 3s infinite";
  if(action==="nod")
    charInner.style.animation="nod .6s";
  if(action==="wave")
    charInner.style.animation="wave .8s ease";
}

/* =====================================================
   ENTER / EXIT
===================================================== */
function enterChar(){
  const c=document.getElementById("char");
  c.style.transition="transform .6s ease";
  c.style.transform="translateX(0)";
}
function exitChar(){
  const c=document.getElementById("char");
  c.style.transition="transform .6s ease";
  c.style.transform="translateX(-120%)";
}

/* =====================================================
   DRAG SUBTITLE
===================================================== */
let dragging=false,dx=0,dy=0;
subtitle.addEventListener("touchstart",e=>{
  if(subtitleSnap)return;
  dragging=true;
  dx=e.touches[0].clientX-subtitle.offsetLeft;
  dy=e.touches[0].clientY-subtitle.offsetTop;
});
window.addEventListener("touchmove",e=>{
  if(!dragging||subtitleSnap)return;
  subtitle.style.left=(e.touches[0].clientX-dx)+"px";
  subtitle.style.top=(e.touches[0].clientY-dy)+"px";
});
window.addEventListener("touchend",()=>dragging=false);

/* =====================================================
   RESET
===================================================== */
function resetAll(){
  freeSubtitle();
  setAction("idle");
  enterChar();
}

/* =====================================================
   INIT
===================================================== */
resetAll();
</script>

</body>
</html>
