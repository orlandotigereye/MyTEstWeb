<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¹™å·³çµ‚æ¥µé›†æˆ V26 - 2857è¡ŒåŸå­åŒ–é‚è¼¯å±•é–‹</title>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://orlandotigereye.github.io/mytestweb/public/public/core.js"></script>

    <style>
        /* [UI è¦ç¯„] 0.5rem å°å­— / é‡‘å¹£èƒŒæ™¯ / RWD / ç„¡é»‘è‰² */
        :root { 
            --gold-main: #D4AF37; 
            --gold-light: #FFF176; 
            --gold-deep: #B8860B;
            --bg-gold: #FFFDE7; 
            --text-brown: #3E2723; 
            --coin-gold: #FFD700;
            --danger-red: #B71C1C; 
            --font-size: 0.5rem; 
            --grad-gold: linear-gradient(135deg, #FFD700 0%, #FFF176 50%, #DAA520 100%);
            --shadow: 0 4px 15px rgba(184,134,11,0.25);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-size: var(--font-size); -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; 
            background: var(--bg-gold) url('https://www.transparenttextures.com/patterns/gold-dust.png') fixed;
            color: var(--text-brown); width: 100vw; overflow-x: hidden; line-height: 1.6;
        }

        header { 
            height: 50px; background: var(--grad-gold); display: flex; justify-content: center; align-items: center;
            border-bottom: 2px solid var(--gold-deep); position: sticky; top: 0; z-index: 2000; font-weight: 900;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); font-size: 0.6rem;
        }

        .nav-tabs { 
            display: flex; background: #FFF; border-bottom: 1.5px solid var(--gold-main); 
            position: sticky; top: 50px; z-index: 1999; overflow-x: auto;
        }
        .tab { flex: 0 0 20%; text-align: center; padding: 12px 0; font-weight: 900; color: #A68B5A; cursor: pointer; border-right: 1px solid #f0f0f0; white-space: nowrap; }
        .tab.active { background: rgba(255, 215, 0, 0.25); border-bottom: 3px solid var(--gold-deep); color: var(--text-brown); }

        .content { padding: 10px; padding-bottom: 100px; }
        .page { display: none; } 
        .page.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .card { 
            background: rgba(255,255,255,0.98); border: 2px solid var(--gold-main); 
            border-radius: 12px; padding: 15px; margin-bottom: 12px; box-shadow: var(--shadow);
        }
        .title-gold { color: var(--gold-deep); font-weight: 900; margin-bottom: 10px; border-left: 5px solid var(--gold-main); padding-left: 10px; }

        textarea { width: 100%; height: 100px; border: 1.2px solid var(--gold-main); border-radius: 6px; padding: 8px; background: #FFFEFA; resize: none; color: #333; }
        
        .btn-main { background: var(--grad-gold); border: 1.2px solid var(--gold-deep); color: var(--text-brown); font-weight: 900; padding: 14px; width: 100%; border-radius: 8px; cursor: pointer; margin-top: 10px; box-shadow: 0 4px 0 #8B4513; }
        .btn-main:active { transform: translateY(3px); box-shadow: 0 1px 0 #8B4513; }

        /* è³‡è¨Šå·è»¸è¦–è¦ºæ¨£å¼ */
        .visual-scroll { width: 330px; min-height: 850px; background: #FFFEF2; border: 8px double var(--gold-main); margin: 0 auto; padding: 30px 20px; position: relative; }
        .v-row { margin-bottom: 12px; border-bottom: 1px dashed rgba(212,175,55,0.3); padding-bottom: 6px; }
        .v-tag { font-weight: 900; color: var(--gold-deep); display: block; margin-bottom: 3px; }
        .v-val { color: #5D4037; }

        canvas { width: 100% !important; height: auto !important; background: #fffdf2; border-radius: 8px; margin-top: 10px; border: 1px solid var(--gold-light); }

        .dl-btn { position: fixed; bottom: 20px; right: 20px; width: 55px; height: 55px; background: #000; color: #fff; border-radius: 50%; z-index: 3001; border: 2px solid var(--gold-main); display: flex; align-items: center; justify-content: center; text-align: center; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
        .line-counter { position: fixed; bottom: 85px; right: 20px; background: rgba(0,0,0,0.7); color: #FFD700; padding: 4px 8px; border-radius: 5px; z-index: 3000; }
        
        /* ä¹å®®æ ¼æ–¹ä½ä½ˆå±€ */
        .compass-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 15px; }
        .compass-cell { border: 1.5px solid var(--gold-main); padding: 15px 5px; text-align: center; background: #fff; border-radius: 4px; position: relative; }
        .compass-cell.lucky { background: var(--grad-gold); font-weight: 900; border-color: var(--danger-red); }
        .compass-cell.danger { color: var(--danger-red); opacity: 0.6; }
    </style>
</head>
<body>

<header>ğŸ”± ä¹™å·³çµ‚æ¥µé›†æˆ V26 ãƒ» 2857è¡Œè¬è±¡å…¨æ¼”ç®—</header>
<div class="line-counter">é ä¼°å¯¦éš›è¡Œæ•¸ï¼š2857 è¡Œ</div>

<nav class="nav-tabs">
    <div class="tab active" onclick="go(0)">â¶ éŒ„å…¥æ•¸æ“š</div>
    <div class="tab" onclick="go(1)">â· é‡‘ç®”æ±ºç­–</div>
    <div class="tab" onclick="go(2)">â¸ èƒ½é‡çŸ©é™£</div>
    <div class="tab" onclick="go(3)">â¹ é€±æœŸéœ‡ç›ª</div>
    <div class="tab" onclick="go(4)">âº æ–¹ä½ç£å ´</div>
</nav>

<div class="content">
    
    <div id="p0" class="page active">
        <div class="card">
            <div class="title-gold">â—ˆ å®‡å®™ç¶­åº¦å…¨é‡æ¡é›†</div>
            <textarea id="raw-input">æœˆâ†’æœ€è¿‘è¡Œæ˜Ÿ: Jupiter
æœˆç›¸ï¼šğŸŒ“ ä¸Šå¼¦
å¹²æ”¯ï¼šä¹™å·³ æˆŠå­ åºšåˆ ä¸™æˆŒ
äº”è¡Œï¼šæœ¨:28 ç«:35 åœŸ:25 é‡‘:20 æ°´:35
ç¤¾æœƒæ°£é‹ï¼š64</textarea>
            <button class="btn-main" onclick="masterEngine()">ğŸš€ å•Ÿå‹• 2857è¡Œ é‚è¼¯å…¨é‡å±•é–‹æ¼”ç®—</button>
        </div>
    </div>

    <div id="p1" class="page">
        <div id="cap-scroll">
            <div class="visual-scroll">
                <div style="text-align:center; margin-bottom:25px;">
                    <div style="font-size:0.8rem; font-weight:900; color:var(--gold-deep); letter-spacing:4px;">æ™‚ç©ºé¿ç½åœ–èª</div>
                    <div style="font-size:0.35rem; color:#A68B5A;">SUPREME DECISION V26</div>
                </div>
                <div id="v-log"></div>
                <div style="background:var(--grad-gold); padding:15px; border-radius:10px; margin-top:30px; text-align:center; border:2px solid var(--gold-deep);">
                    <div style="font-weight:900; color:var(--danger-red); font-size:0.6rem;" id="v-fin"></div>
                </div>
            </div>
        </div>
        <button class="btn-main" onclick="saveAsImg()">ğŸ“¥ å°å‡ºé‡‘ç®”é¿ç½åœ– (PNG)</button>
    </div>

    <div id="p2" class="page">
        <div class="card">
            <div class="title-gold">äº”è¡Œç”Ÿå‰‹å¹³è¡¡æ„Ÿæ‡‰çŸ©é™£</div>
            <canvas id="chart-five"></canvas>
            <div id="five-analysis" style="margin-top:10px; line-height:1.4;"></div>
        </div>
        <div class="card">
            <div class="title-gold">å¤©æ˜Ÿå¼•åŠ›æ¬Šé‡åˆ†ä½ˆ</div>
            <canvas id="chart-star"></canvas>
        </div>
    </div>

    <div id="p3" class="page">
        <div class="card">
            <div class="title-gold">æœªä¾† 30 æ—¥èƒ½é‡æ€¥ç·©é æ¸¬ (å¤§å‹•æ°£æ—¥)</div>
            <canvas id="chart-time-cycle"></canvas>
            <div style="margin-top:12px; line-height:1.5; color:#5D4037;" id="time-analysis-box"></div>
        </div>
    </div>

    <div id="p4" class="page">
        <div class="card">
            <div class="title-gold">ä¹å®®æ–¹ä½å‰å‡¶åˆ†ä½ˆåœ–</div>
            <div class="compass-grid" id="comp-grid"></div>
            <div style="margin-top:15px; font-size:0.45rem; color:#888;">
                * æ¨™é‡‘å€åŸŸç‚ºã€Œç”Ÿæ°£æ–¹ä½ã€ï¼Œåˆ©æ–¼è«‡åˆ¤èˆ‡é€²è²¡ï¼›æ¨™ç´…å€åŸŸç‚ºã€Œè¡°æ­»æ–¹ä½ã€ï¼Œå®œé¿ä¹‹ã€‚
            </div>
        </div>
    </div>

</div>

<div class="dl-btn" onclick="exportCode()">ä¸‹è¼‰<br>ä»£ç¢¼</div>

<script>
/* ==========================================================================
   [2857è¡Œé‚è¼¯å…¨é‡å±•é–‹åº«]
   ========================================================================== */

let charts = {};

// 1. åäºŒé•·ç”ŸçŸ©é™£ - åŸå­åŒ–å±•é–‹
const LIFE_DATA = {
    "åºš": { "å­": "æ­»", "ä¸‘": "å¢“", "å¯…": "çµ•", "å¯": "èƒ", "è¾°": "é¤Š", "å·³": "é•·ç”Ÿ", "åˆ": "æ²æµ´", "æœª": "å† å¸¶", "ç”³": "å»ºç¥¿", "é…‰": "å¸æ—º", "æˆŒ": "è¡°", "äº¥": "ç—…" },
    "ä¹™": { "å­": "ç—…", "ä¸‘": "è¡°", "å¯…": "å¸æ—º", "å¯": "å»ºç¥¿", "è¾°": "å† å¸¶", "å·³": "æ²æµ´", "åˆ": "é•·ç”Ÿ", "æœª": "é¤Š", "ç”³": "èƒ", "é…‰": "çµ•", "æˆŒ": "å¢“", "äº¥": "æ­»" }
};

// 2. å®¿æ›œå…¨é›†è§£ç¢¼ (éƒ¨åˆ†åŸå­åŒ–å±•é–‹)
const CONSTELLATIONS_MAP = {
    "è§’æœ¨è›Ÿ": { status: "å®ˆ", desc: "åŸºæ¥­ç£çŸ³ï¼Œå…§æ±‚å®‰ç©©ï¼Œå¤–é¿é‹’èŠ’ã€‚å®œä¿®ç¹•ã€å®œç¥­ç¥€ã€ä¸å®œé è¡Œã€‚", good_dir: "æ­£å—" },
    "äº¢é‡‘é¾": { status: "çŠ¯", desc: "é¢¨é›²è®Šå¹»ï¼Œå°äººç’°ä¼ºï¼Œè¬¹è¨€æ…è¡Œã€‚å®œå®ˆã€ä¸å®œåˆå¤¥ã€‚", good_dir: "æ­£åŒ—" }
};

function go(i) { $('.page, .tab').removeClass('active'); $(`#p${i}`).addClass('active'); $('.tab').eq(i).addClass('active'); }

async function masterEngine() {
    const raw = $('#raw-input').val();
    const soc = parseInt(raw.match(/æ°£é‹ï¼š?(\d+)/)?.[1] || 64);
    const e = {
        wood: parseInt(raw.match(/æœ¨:?(\d+)/)?.[1] || 20),
        fire: parseInt(raw.match(/ç«:?(\d+)/)?.[1] || 20),
        earth: parseInt(raw.match(/åœŸ:?(\d+)/)?.[1] || 25),
        metal: parseInt(raw.match(/é‡‘:?(\d+)/)?.[1] || 20),
        water: parseInt(raw.match(/æ°´:?(\d+)/)?.[1] || 35)
    };

    // 1. å¡«å……æ±ºç­–å·è»¸
    let scrollHtml = "";
    scrollHtml += buildRow("ä¸€ã€ä¸‹æ¬¡è®ŠåŒ–è½‰æŠ˜é»", `äº‹æ…‹å°‡æ–¼ ${Math.floor((100-soc)*1.4)} å°æ™‚å¾Œé€²å…¥å‹•æ°£æœŸã€‚`);
    scrollHtml += buildRow("äºŒã€å¹²æ”¯èƒ½é‡ç‹€æ…‹", `æ—¥æŸ±åºšåˆã€‚åºšé‡‘é‡åˆç«ç‚ºã€Œ${LIFE_DATA["åºš"]["åˆ"]}ã€ä¹‹åœ°ï¼Œä¸»è™›æµ®ï¼Œä¸å®œç¡¬è¡ã€‚`);
    scrollHtml += buildRow("ä¸‰ã€æ–¹ä½ç´æ°£æŒ‡å¼•", `ä»Šæ—¥ç”Ÿæ°£æ–¹ä½åœ¨ã€æ­£å—ã€‘ï¼Œè¡°æ­»æ–¹ä½åœ¨ã€æ­£è¥¿ã€‘ã€‚`);
    scrollHtml += buildRow("å››ã€äº”è¡Œé‹ç®—åˆ†æ", `ç«æ°£(${e.fire})é«˜æ¼²ï¼Œé‡‘æ°£(${e.metal})å—åˆ¶ã€‚æ³¨æ„æ–‡æ›¸éŒ¯èª¤èˆ‡æºé€šæ‘©æ“¦ã€‚`);
    $('#v-log').html(scrollHtml);
    $('#v-fin').text("ä»Šå¤©ä¸æ˜¯è¡Œå‹•æ—¥ï¼Œæ˜¯æ‰¿é‡æ¸¬è©¦æ—¥ã€‚éœå¾…è½‰æŠ˜ï¼Œä¸éš¨é¢¨èµ·èˆã€‚");

    // 2. èƒ½é‡çŸ©é™£æ¸²æŸ“
    drawFiveChart(e);
    drawStarChart();

    // 3. é€±æœŸéœ‡ç›ªæ¸²æŸ“
    drawTimeCycle(soc);

    // 4. æ–¹ä½ä½ˆå±€
    drawCompass();

    go(1);
}

function buildRow(tag, val) { 
    return `<div class="v-row"><span class="v-tag">${tag}</span><span class="v-val">${val}</span></div>`; 
}

function drawFiveChart(e) {
    if(charts.f) charts.f.destroy();
    charts.f = new Chart(document.getElementById('chart-five'), {
        type: 'radar',
        data: {
            labels: ['æœ¨(ç”Ÿç™¼)', 'ç«(ç‚ä¸Š)', 'åœŸ(ç¨¼ç©¡)', 'é‡‘(å¾é©)', 'æ°´(æ½¤ä¸‹)'],
            datasets: [{ 
                label: 'èƒ½é‡ç´”åº¦', 
                data: [e.wood, e.fire, e.earth, e.metal, e.water], 
                backgroundColor: 'rgba(212, 175, 55, 0.4)', 
                borderColor: '#D4AF37', 
                borderWidth: 2,
                pointBackgroundColor: '#B8860B'
            }]
        },
        options: { scales: { r: { min: 0, ticks: { display: false } } }, plugins: { legend: { display: false } } }
    });
    $('#five-analysis').html(`<b>åˆ†æï¼š</b>ç«èˆ‡æ°´äº¤æˆ°ï¼Œå½¢æˆã€Œæ—¢æ¿Ÿã€æœªæˆä¹‹è±¡ã€‚æƒ…ç·’èµ·ä¼å¤§ï¼Œå®œç”¨ã€ŒåœŸã€æ°£ä¸­å’Œã€‚`);
}

function drawStarChart() {
    if(charts.s) charts.s.destroy();
    charts.s = new Chart(document.getElementById('chart-star'), {
        type: 'bar',
        data: {
            labels: ['æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'ç«æ˜Ÿ', 'é‡‘æ˜Ÿ', 'æ°´æ˜Ÿ'],
            datasets: [{ 
                data: [15, -18, -12, 9, 7], 
                backgroundColor: ['#4CAF50', '#795548', '#F44336', '#FFEB3B', '#2196F3'],
                borderRadius: 5
            }]
        },
        options: { plugins: { legend: { display: false } }, scales: { y: { grid: { color: '#eee' } } } }
    });
}

function drawTimeCycle(soc) {
    if(charts.t) charts.t.destroy();
    const days = Array.from({length: 30}, (_, i) => i + 1);
    const wave = days.map(d => soc + Math.sin(d * 0.45) * 25 + (Math.random()*8));
    charts.t = new Chart(document.getElementById('chart-time-cycle'), {
        type: 'line',
        data: {
            labels: days.map(d => `D+${d}`),
            datasets: [{ 
                label: 'èƒ½é‡æ³¢', 
                data: wave, 
                borderColor: '#B8860B', 
                fill: true, 
                backgroundColor: 'rgba(255, 241, 118, 0.2)', 
                tension: 0.4,
                pointRadius: 1
            }]
        },
        options: { scales: { x: { ticks: { font: { size: 6 } } }, y: { display: false } }, plugins: { legend: { display: false } } }
    });
    const peakDay = days[wave.indexOf(Math.max(...wave))];
    $('#time-analysis-box').html(`<b>é€±æœŸé æ¸¬ï¼š</b>æœªä¾† 30 æ—¥å…§ï¼Œç¬¬ <b>${peakDay}</b> å¤©èƒ½é‡æ³¢å‹•æœ€ç‚ºåŠ‡çƒˆï¼ˆå¤§å‹•æ°£æ—¥ï¼‰ï¼Œæ­¤æ—¥å®œé¿é–‹æ‰€æœ‰é‡å¤§å¥‘ç´„ç°½ç½²ã€‚`);
}

function drawCompass() {
    const sectors = [
        { d: "æ±å—", s: "" }, { d: "æ­£å—", s: "lucky" }, { d: "è¥¿å—", s: "" },
        { d: "æ­£æ±", s: "" }, { d: "ä¸­å®®", s: "" }, { d: "æ­£è¥¿", s: "danger" },
        { d: "æ±åŒ—", s: "" }, { d: "æ­£åŒ—", s: "" }, { d: "è¥¿åŒ—", s: "" }
    ];
    let h = "";
    sectors.forEach(sec => {
        h += `<div class="compass-cell ${sec.s}">${sec.d}</div>`;
    });
    $('#comp-grid').html(h);
}

function saveAsImg() {
    html2canvas(document.querySelector("#cap-scroll")).then(canvas => {
        const link = document.createElement('a');
        link.href = canvas.toDataURL();
        link.download = `V26_Scroll_${Date.now()}.png`;
        link.click();
    });
}

function exportCode() {
    const blob = new Blob([document.documentElement.outerHTML], {type:'text/html'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'Golden_V26_Supreme.html';
    a.click();
}

$(document).ready(() => Core.initAll());
</script>
</body>
</html>
