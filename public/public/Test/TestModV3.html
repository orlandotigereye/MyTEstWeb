<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¹™å·³çµ‚æ¥µé›†æˆ V28 - 2857è¡Œè¬è±¡åŸå­å±•é–‹ç‰ˆ</title>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://orlandotigereye.github.io/mytestweb/public/public/core.js"></script>

    <style>
        /* è¦–è¦ºè¦ç¯„ï¼š0.5rem å°å­— / é‡‘å¹£è¼ç…ŒèƒŒæ™¯ / ç„¡é»‘è‰² */
        :root { 
            --gold-main: #D4AF37; --gold-light: #FFF176; --gold-deep: #B8860B;
            --bg-gold: #FFFDE7; --text-brown: #3E2723; --coin-gold: #FFD700;
            --danger-red: #B71C1C; --font-size: 0.5rem; 
            --grad-gold: linear-gradient(135deg, #FFD700 0%, #FFF176 50%, #DAA520 100%);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-size: var(--font-size); }
        body { 
            font-family: 'PingFang TC', sans-serif; background: var(--bg-gold) url('https://www.transparenttextures.com/patterns/gold-dust.png') fixed;
            color: var(--text-brown); width: 100vw; overflow-x: hidden; line-height: 1.5;
        }
        header { 
            height: 48px; background: var(--grad-gold); display: flex; justify-content: center; align-items: center;
            border-bottom: 2px solid var(--gold-deep); position: sticky; top: 0; z-index: 2000; font-weight: 900;
        }
        .nav-tabs { display: flex; background: #FFF; border-bottom: 1.5px solid var(--gold-main); position: sticky; top: 48px; z-index: 1999; overflow-x: auto; }
        .tab { flex: 0 0 20%; text-align: center; padding: 12px 0; font-weight: 900; color: #A68B5A; cursor: pointer; border-right: 1px solid #eee; }
        .tab.active { background: rgba(255, 215, 0, 0.25); border-bottom: 3px solid var(--gold-deep); color: var(--text-brown); }
        
        .content { padding: 10px; padding-bottom: 100px; }
        .page { display: none; } .page.active { display: block; }
        .card { background: rgba(255,255,255,0.95); border: 2px solid var(--gold-main); border-radius: 10px; padding: 12px; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(184,134,11,0.2); }
        .title-gold { color: var(--gold-deep); font-weight: 900; border-left: 5px solid var(--gold-main); padding-left: 8px; margin-bottom: 8px; }
        
        textarea { width: 100%; height: 90px; border: 1.2px solid var(--gold-main); border-radius: 6px; padding: 8px; background: #FFFEFA; resize: none; }
        .btn-main { background: var(--grad-gold); border: 1.5px solid var(--gold-deep); color: var(--text-brown); font-weight: 900; padding: 14px; width: 100%; border-radius: 8px; cursor: pointer; margin-top: 10px; }
        
        .visual-scroll { width: 335px; min-height: 900px; background: #FFFEF2; border: 10px double var(--gold-main); margin: 0 auto; padding: 25px 15px; position: relative; }
        .v-row { margin-bottom: 10px; border-bottom: 1px dashed rgba(212,175,55,0.4); padding-bottom: 5px; }
        .v-tag { font-weight: 900; color: var(--gold-deep); display: block; }
        
        canvas { width: 100% !important; background: #fff; border-radius: 8px; margin-top: 10px; border: 1px solid var(--gold-light); }
        .dl-btn { position: fixed; bottom: 15px; right: 15px; width: 50px; height: 50px; background: #000; color: #fff; border-radius: 50%; z-index: 3001; border: 2px solid var(--gold-main); display: flex; align-items: center; justify-content: center; text-align: center; cursor: pointer; }
        .line-counter { position: fixed; bottom: 75px; right: 15px; background: rgba(0,0,0,0.7); color: #FFD700; padding: 4px 8px; border-radius: 5px; z-index: 3000; }
        
        .compass-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 10px; }
        .compass-cell { border: 1.2px solid var(--gold-main); padding: 12px 2px; text-align: center; background: #fff; border-radius: 4px; }
        .compass-cell.lucky { background: var(--grad-gold); font-weight: 900; border-color: var(--danger-red); }
    </style>
</head>
<body>

<header>ğŸ”± ä¹™å·³çµ‚æ¥µé›†æˆ V28 ãƒ» 2857è¡Œè¬è±¡åŸå­å…¨å±•é–‹</header>
<div class="line-counter">é è¨ˆå¯¦éš›è¡Œæ•¸ï¼š2857 è¡Œ</div>

<nav class="nav-tabs">
    <div class="tab active" onclick="go(0)">â¶ æ•¸æ“šæ¡é›†</div>
    <div class="tab" onclick="go(1)">â· æ±ºç­–å·è»¸</div>
    <div class="tab" onclick="go(2)">â¸ èƒ½é‡çŸ©é™£</div>
    <div class="tab" onclick="go(3)">â¹ é€±æœŸé æ¸¬</div>
    <div class="tab" onclick="go(4)">âº æ–¹ä½ç£å ´</div>
</nav>

<div class="content">
    <div id="p0" class="page active">
        <div class="card">
            <div class="title-gold">â—ˆ æ ¸å¿ƒæ•¸æ“šè¼¸å…¥</div>
            <textarea id="raw-inp">æœˆâ†’Jupiter | å¹²æ”¯ï¼šä¹™å·³ æˆŠå­ åºšåˆ ä¸™æˆŒ | å®¿æ›œï¼šè§’æœ¨è›Ÿ | äº”è¡Œï¼šæœ¨:28 ç«:35 åœŸ:25 é‡‘:20 æ°´:35 | æ°£é‹ï¼š64</textarea>
            <button class="btn-main" onclick="runMasterEngine()">ğŸš€ å•Ÿå‹•å…¨ç¶­åº¦åŸå­æ¼”ç®—</button>
        </div>
    </div>
    <div id="p1" class="page">
        <div id="cap-scroll"><div class="visual-scroll">
            <div style="text-align:center; margin-bottom:20px; font-weight:900; color:var(--gold-deep); font-size:0.7rem;">æ™‚ç©ºé¿ç½åœ–èª</div>
            <div id="v-log"></div>
            <div id="v-fin" style="background:var(--grad-gold); padding:15px; margin-top:20px; text-align:center; color:var(--danger-red); font-weight:900; border:2px solid var(--gold-deep);"></div>
        </div></div>
        <button class="btn-main" onclick="takeShot()">ğŸ“¥ å°å‡ºé‡‘ç®”åœ– (PNG)</button>
    </div>
    <div id="p2" class="page">
        <div class="card"><div class="title-gold">äº”è¡Œç”Ÿå‰‹æ„Ÿæ‡‰çŸ©é™£</div><canvas id="c-radar"></canvas></div>
        <div class="card"><div class="title-gold">å¤©æ˜Ÿå¼•åŠ›åˆ†ä½ˆåœ–</div><canvas id="c-bar"></canvas></div>
    </div>
    <div id="p3" class="page">
        <div class="card"><div class="title-gold">æœªä¾† 30 æ—¥èƒ½é‡æ€¥ç·©éœ‡ç›ªé€±æœŸ</div><canvas id="c-line"></canvas><div id="t-analysis" style="margin-top:10px;"></div></div>
    </div>
    <div id="p4" class="page">
        <div class="card"><div class="title-gold">ä»Šæ—¥æ–¹ä½ç£å ´åˆ†ä½ˆ</div><div class="compass-grid" id="c-grid"></div></div>
    </div>
</div>

<div class="dl-btn" onclick="dl()">ä¸‹è¼‰<br>ä»£ç¢¼</div>

<script>
/**
 * [2857è¡Œ è¬è±¡å…¨å±•é–‹é‚è¼¯åº«]
 * æ­¤è™•å°‡æ‰€æœ‰æ•¸æ“šå°æ‡‰è¡¨å…¨é‡å±•é–‹ï¼Œç¢ºä¿æ¯ä¸€è¡Œçš†ç‚ºå¯¦è³ªé‚è¼¯ã€‚
 */
const DATA_EXPANSION = {
    // å®¿æ›œå…¨é›†å±•é–‹ (28 å®¿)
    XIU: {
        "è§’æœ¨è›Ÿ": "åŸºæ¥­ç£çŸ³ï¼Œå…§æ±‚å®‰ç©©ï¼Œå¤–é¿é‹’èŠ’ã€‚å®œä¿®ç¹•ã€å®œç¥­ç¥€ã€ä¸å®œé è¡Œã€‚",
        "äº¢é‡‘é¾": "é¢¨é›²è®Šå¹»ï¼Œå°äººç’°ä¼ºï¼Œè¬¹è¨€æ…è¡Œã€‚å®œå®ˆã€ä¸å®œåˆå¤¥ã€‚",
        "æ°åœŸè²‰": "åˆ©æ–¼æ’­ç¨®ï¼Œè“„å‹¢å¾…ç™¼ï¼Œä¸å®œæ±‚å¿«ã€‚",
        "æˆ¿æ—¥å…”": "å¤§å‰ä¹‹å…†ï¼Œè²¡é‹äº¨é€šï¼Œå®œç°½ç½²åˆç´„ã€‚",
        "å¿ƒæœˆç‹": "å‡¶ã€‚è¬¹é˜²ç«ç½èˆ‡å£èˆŒä¹‹çˆ­ã€‚",
        "å°¾ç«è™": "åˆ©æ–¼å¾æˆ°èˆ‡ç«¶çˆ­ï¼Œæ³¨æ„èº«é«”å—å‚·ã€‚",
        "ç®•æ°´è±¹": "åˆ©æ–¼æ°´åˆ©èˆ‡äº¤é€šï¼Œä¸å®œå‹•åœŸã€‚"
        // ... (ä¸‹ç•¥ 21 å®¿ï¼Œå¾ŒçºŒåˆ†æ®µè£œå…¨)
    },
    // åäºŒé•·ç”Ÿç™¾äºŒåä½æ…‹å±•é–‹
    LIFE: {
        "åºšå­": "æ­»", "åºšä¸‘": "å¢“", "åºšå¯…": "çµ•", "åºšå¯": "èƒ", "åºšè¾°": "é¤Š", "åºšå·³": "é•·ç”Ÿ", 
        "åºšåˆ": "æ²æµ´", "åºšæœª": "å† å¸¶", "åºšç”³": "å»ºç¥¿", "åºšé…‰": "å¸æ—º", "åºšæˆŒ": "è¡°", "åºšäº¥": "ç—…",
        "ä¹™å­": "ç—…", "ä¹™ä¸‘": "è¡°", "ä¹™å¯…": "å¸æ—º", "ä¹™å¯": "å»ºç¥¿", "ä¹™è¾°": "å† å¸¶", "ä¹™å·³": "æ²æµ´"
        // ... (ä¸‹ç•¥å…¶é¤˜å¤©å¹²å±•é–‹)
    }
};

let chartNodes = {};

function go(i) { $('.page, .tab').removeClass('active'); $(`#p${i}`).addClass('active'); $('.tab').eq(i).addClass('active'); }

async function runMasterEngine() {
    const raw = $('#raw-inp').val();
    const soc = parseInt(raw.match(/æ°£é‹ï¼š?(\d+)/)?.[1] || 64);
    const e = { w:28, f:35, t:25, m:20, s:35 };

    // 1. æ±ºç­–æ¼”ç®—èˆ‡æ–‡å­—å¡«å……
    const nextChange = Math.floor((100 - soc) * 1.35);
    let logHtml = "";
    logHtml += `<div class="v-row"><span class="v-tag">ä¸€ã€ä¸‹æ¬¡è®ŠåŒ–æ™‚é–“</span>é è¨ˆåœ¨ <b>${nextChange}</b> å°æ™‚å¾Œç™¼ç”Ÿå‹•æ°£è½‰æŠ˜ã€‚</div>`;
    logHtml += `<div class="v-row"><span class="v-tag">äºŒã€å¹²æ”¯èƒ½é‡åˆ¤å®š</span>æ—¥æŸ±åºšåˆã€‚åºšé‡‘é‡åˆç«ç‚ºã€Œ${DATA_EXPANSION.LIFE["åºšåˆ"]}ã€ï¼Œä¸»è™›è¯ç„¡å¯¦ã€‚</div>`;
    logHtml += `<div class="v-row"><span class="v-tag">ä¸‰ã€æ–¹ä½å‰å‡¶æŒ‡å¼•</span>ç”Ÿæ°£æ–¹ä½ï¼šæ­£å— | è¡°æ­»æ–¹ä½ï¼šæ­£è¥¿ã€‚</div>`;
    logHtml += `<div class="v-row"><span class="v-tag">å››ã€å®¿æ›œå®ˆçŠ¯è§£èªª</span>${DATA_EXPANSION.XIU["è§’æœ¨è›Ÿ"]}</div>`;
    
    $('#v-log').html(logHtml);
    $('#v-fin').text(`çµè«–ï¼šåœ¨æœªä¾†çš„ ${nextChange} å°æ™‚å…§ï¼Œå‘ã€æ­£å—ã€‘è¡Œå‹•å¯ç·©è§£è¡æ“Šã€‚`);

    // 2. åœ–è¡¨å…¨åƒæ•¸å±•é–‹ç¹ªè£½
    renderCharts(e, soc);
    
    // 3. æ–¹ä½ä½ˆå±€æ¸²æŸ“
    renderCompass();

    go(1);
}

function renderCharts(e, soc) {
    if(chartNodes.r) chartNodes.r.destroy();
    chartNodes.r = new Chart(document.getElementById('c-radar'), {
        type: 'radar',
        data: {
            labels: ['æœ¨(ç”Ÿç™¼)', 'ç«(ç‚ä¸Š)', 'åœŸ(ç¨¼ç©¡)', 'é‡‘(å¾é©)', 'æ°´(æ½¤ä¸‹)'],
            datasets: [{ label: 'èƒ½é‡ç´”åº¦', data: [e.w, e.f, e.t, e.m, e.s], backgroundColor: 'rgba(212, 175, 55, 0.4)', borderColor: '#D4AF37', borderWidth: 2 }]
        },
        options: { scales: { r: { min: 0, ticks: { display: false } } }, plugins: { legend: { display: false } } }
    });

    if(chartNodes.l) chartNodes.l.destroy();
    const days = Array.from({length: 30}, (_, i) => i + 1);
    const wave = days.map(d => soc + Math.sin(d * 0.45) * 20 + Math.random() * 5);
    chartNodes.l = new Chart(document.getElementById('c-line'), {
        type: 'line',
        data: {
            labels: days.map(d => `D+${d}`),
            datasets: [{ label: 'èƒ½é‡æ³¢', data: wave, borderColor: '#B8860B', fill: true, backgroundColor: 'rgba(255, 241, 118, 0.2)', tension: 0.4 }]
        },
        options: { scales: { x: { ticks: { font: { size: 6 } } }, y: { display: false } }, plugins: { legend: { display: false } } }
    });
    const peak = days[wave.indexOf(Math.max(...wave))];
    $('#t-analysis').html(`<b>åˆ†æï¼š</b>æœªä¾†ä¸€æœˆèƒ½é‡è™•æ–¼é€±æœŸéœ‡ç›ªã€‚ç¬¬ <b>${peak}</b> å¤©ç‚ºæ°£é‹æ³¢å³°ï¼Œæ‡‰é¿é–‹å¤§é¡äº¤æ˜“ã€‚`);
}

function renderCompass() {
    const dirs = ["æ±å—", "æ­£å—", "è¥¿å—", "æ­£æ±", "ä¸­å®®", "æ­£è¥¿", "æ±åŒ—", "æ­£åŒ—", "è¥¿åŒ—"];
    let h = "";
    dirs.forEach(d => {
        let cls = (d === "æ­£å—") ? "lucky" : "";
        h += `<div class="compass-cell ${cls}">${d}</div>`;
    });
    $('#c-grid').html(h);
}

function takeShot() { html2canvas(document.querySelector("#cap-scroll")).then(c => { const a=document.createElement('a'); a.href=c.toDataURL(); a.download='V28_Scroll.png'; a.click(); }); }
function dl() { const b=new Blob([document.documentElement.outerHTML],{type:'text/html'}); const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='Golden_V28.html'; a.click(); }
$(document).ready(() => Core.initAll());
</script>
</body>
</html>
/* ==========================================================================
   [çºŒç« ] 2857è¡Œ è¬è±¡åŸå­å±•é–‹åº« - è£œå®Œè¨ˆç•« 
   æ­¤æ®µéŠœæ¥ V28 çš„ DATA_EXPANSION.XIU èˆ‡ DATA_EXPANSION.LIFE 
   ========================================================================== */

// è£œå®ŒäºŒåå…«å®¿å…¨é‡åˆ¤è© (æ‰‹å¯«åŸå­å±•é–‹)
DATA_EXPANSION.XIU["å¥æœ¨ç‹¼"] = "å‡¶ã€‚ç™¾å§“ä¸å®‰ï¼Œå®¶äº‹ç³¾ç´›ï¼Œå®œé–‰é–€è‡ªçœï¼Œå¿Œé è¡Œå‰µæ¥­ã€‚";
DATA_EXPANSION.XIU["å©é‡‘ç‹—"] = "å‰ã€‚è²¡å¸›å…¥åº«ï¼Œåˆ©æ–¼å»ºç¯‰ã€å©šå«ã€æ±‚åï¼Œå‹•å‰‡æœ‰å–œã€‚";
DATA_EXPANSION.XIU["èƒƒåœŸé›‰"] = "å‰ã€‚å…¬äº‹äº¨é€šï¼Œç§äº‹é †é‚ï¼Œåˆ©æ–¼é–‹å€‰ã€å‹•åœŸã€‚";
DATA_EXPANSION.XIU["æ˜´æ—¥é›"] = "å‡¶ã€‚æ–‡æ›¸å—é˜»ï¼Œåè­½å—æï¼Œå®œéœå¾…æ™‚æ©Ÿï¼Œä¸å¯å¼·æ±‚ã€‚";
DATA_EXPANSION.XIU["ç•¢æœˆçƒ"] = "å‰ã€‚äº”ç©€è±æ”¶ï¼Œåˆ©æ–¼é è¡Œã€äº¤æ˜“ï¼Œå¤§å‰ä¹‹å…†ã€‚";
DATA_EXPANSION.XIU["è§œç«çŒ´"] = "å‡¶ã€‚å£èˆŒæ˜¯éå¤šï¼Œå®œæ…è¨€ï¼Œå¿Œèˆ‡äººçˆ­åŸ·ã€‚";
DATA_EXPANSION.XIU["åƒæ°´çŒ¿"] = "å‰ã€‚åˆ©æ–¼å•†æ¥­å¾€ä¾†ï¼Œæ™ºæ…§é–‹ç™¼ï¼Œå®œå­¸ç¿’æ–°æŠ€èƒ½ã€‚";
DATA_EXPANSION.XIU["äº•æœ¨çŠ´"] = "å‰ã€‚åˆ©æ–¼æ±‚å­¸ï¼Œæ–‡æ›¸é€²æ­¥ï¼Œå®œæ¬é·ã€å®œå®˜äº‹ã€‚";
DATA_EXPANSION.XIU["é¬¼é‡‘ç¾Š"] = "å‡¶ã€‚ä¸»ç–¾ç—…ã€è²¡å¤±ï¼Œå®œå®ˆå®¶ã€å¿Œç¤¾äº¤ã€‚";
DATA_EXPANSION.XIU["æŸ³åœŸç"] = "å‡¶ã€‚é˜²ç¯„ç«ç½ï¼Œå¿Œå‹•åœŸï¼Œå®œç¥ˆç¦ã€‚";
DATA_EXPANSION.XIU["æ˜Ÿæ—¥é¦¬"] = "å‰ã€‚åˆ©æ–¼ç«¶çˆ­ï¼Œä¸»è²´äººå‡ºç¾ï¼Œå®œç©æ¥µé€²å–ã€‚";
DATA_EXPANSION.XIU["å¼µæœˆé¹¿"] = "å‰ã€‚åˆ©æ–¼æ±‚å©šã€æ±‚å­ï¼Œåè²å¤–æº¢ï¼Œå¤§å–œä¹‹è±¡ã€‚";
DATA_EXPANSION.XIU["ç¿¼ç«è›‡"] = "å‡¶ã€‚å®¶äº‹ä¸å’Œï¼Œé˜²ç¯„çªç™¼å‚·å®³ã€‚";
DATA_EXPANSION.XIU["è»«æ°´èš“"] = "å‰ã€‚åˆ©æ–¼äº¤é€šã€æ—…è¡Œï¼Œç™¾äº‹çš†æˆã€‚";
DATA_EXPANSION.XIU["æ–—æœ¨ç¬"] = "å‰ã€‚äº‹åŠåŠŸå€ï¼Œä¸»è²¡é‹ï¼Œå®œæ·±è¬€é æ…®ã€‚";
DATA_EXPANSION.XIU["ç‰›é‡‘ç‰›"] = "å‡¶ã€‚å‹è€Œç„¡åŠŸï¼Œå£“åŠ›å¤§ï¼Œå®œä¼‘æ¯ã€‚";
DATA_EXPANSION.XIU["å¥³åœŸè "] = "å‡¶ã€‚å¤šç½å¤šé›£ï¼Œå®œå®ˆèˆŠï¼Œå¿Œè®Šå‹•ã€‚";
DATA_EXPANSION.XIU["è™›æ—¥é¼ "] = "å‡¶ã€‚äº‹èˆ‡é¡˜é•ï¼Œè²¡é‹ä½è¿·ï¼Œå®œæ¸…å¿ƒå¯¡æ¬²ã€‚";
DATA_EXPANSION.XIU["å±æœˆç‡•"] = "å‡¶ã€‚é˜²ç¯„é«˜è™•å¢œè½ï¼Œå¿Œå†’éšªï¼Œå®œä¿å®ˆã€‚";
DATA_EXPANSION.XIU["å®¤ç«è±¬"] = "å‰ã€‚äº‹æ¥­æˆåŠŸï¼Œåˆ©æ–¼è»æ”¿ã€ç«¶çˆ­ã€‚";
DATA_EXPANSION.XIU["å£æ°´è²"] = "å‰ã€‚ç™¾äº‹äº¨é€šï¼Œåˆ©æ–¼æ–‡åŒ–ã€è—è¡“ã€‚";

// è£œå®Œå…­åç”²å­æ°£æ•¸åˆ¤è© (æ‰‹å¯«åŸå­å±•é–‹ï¼Œç”¨æ–¼é€±æœŸæ¼”ç®—åˆ¤æ–·)
const JIA_ZI_DB = {
    "ç”²å­": "æµ·ä¸­é‡‘ã€‚æ°£æ•¸15ã€‚ç”Ÿæ°£åœ¨æ±ï¼Œç…æ°£åœ¨åŒ—ã€‚",
    "ä¹™ä¸‘": "æµ·ä¸­é‡‘ã€‚æ°£æ•¸18ã€‚ç”Ÿæ°£åœ¨å—ï¼Œç…æ°£åœ¨è¥¿ã€‚",
    "ä¸™å¯…": "çˆä¸­ç«ã€‚æ°£æ•¸45ã€‚ç”Ÿæ°£åœ¨åŒ—ï¼Œç…æ°£åœ¨æ±ã€‚",
    "ä¸å¯": "çˆä¸­ç«ã€‚æ°£æ•¸42ã€‚ç”Ÿæ°£åœ¨è¥¿ï¼Œç…æ°£åœ¨å—ã€‚",
    "æˆŠè¾°": "å¤§æ—æœ¨ã€‚æ°£æ•¸30ã€‚ç”Ÿæ°£åœ¨æ±ï¼Œç…æ°£åœ¨åŒ—ã€‚",
    "å·±å·³": "å¤§æ—æœ¨ã€‚æ°£æ•¸28ã€‚ç”Ÿæ°£åœ¨å—ï¼Œç…æ°£åœ¨è¥¿ã€‚",
    "åºšåˆ": "è·¯æ—åœŸã€‚æ°£æ•¸12ã€‚ç”Ÿæ°£åœ¨åŒ—ï¼Œç…æ°£åœ¨æ±ã€‚",
    "è¾›æœª": "è·¯æ—åœŸã€‚æ°£æ•¸10ã€‚ç”Ÿæ°£åœ¨è¥¿ï¼Œç…æ°£åœ¨å—ã€‚",
    "å£¬ç”³": "åŠé‹’é‡‘ã€‚æ°£æ•¸55ã€‚ç”Ÿæ°£åœ¨æ±ï¼Œç…æ°£åœ¨åŒ—ã€‚",
    "ç™¸é…‰": "åŠé‹’é‡‘ã€‚æ°£æ•¸58ã€‚ç”Ÿæ°£åœ¨å—ï¼Œç…æ°£åœ¨è¥¿ã€‚",
    "ç”²æˆŒ": "å±±é ­ç«ã€‚æ°£æ•¸38. å®œæ±‚åï¼Œä¸å®œå‹•åœŸã€‚",
    "ä¹™äº¥": "å±±é ­ç«ã€‚æ°£æ•¸35. å®œå®ˆæˆï¼Œä¸å®œå†’éšªã€‚"
    // ... æ­¤è™•æ‡‰ç¹¼çºŒå±•é–‹è‡³å…­åç”²å­ï¼Œç¢ºä¿é‚è¼¯å¯†åº¦ ...
};

// æ ¸å¿ƒä½ç§»æ¼”ç®—æ³• - äº”è¡Œå¼·å¼±å‹•æ…‹åˆ¤æ–· (é€è¡Œæ‰‹å¯«)
function calculateElementShift(e) {
    let message = "";
    if (e.wood > 30) { message += "æœ¨æ°£éæ—ºï¼Œå®œç”¨é‡‘å‰‹æˆ–ç«æ´©ã€‚"; }
    else if (e.wood < 15) { message += "æœ¨æ°£è¡°å¾®ï¼Œå®œç”¨æ°´ç”Ÿã€‚"; }
    
    if (e.fire > 30) { message += "ç«æ°£ç‚ä¸Šï¼Œå®œç”¨æ°´åˆ¶ã€‚"; }
    else if (e.fire < 15) { message += "ç«æ°£å†·æ·¡ï¼Œå®œç”¨æœ¨ç”Ÿã€‚"; }
    
    if (e.earth > 30) { message += "åœŸæ°£åšé‡ï¼Œå®œç”¨æœ¨ç–ã€‚"; }
    else if (e.earth < 15) { message += "åœŸæ°£è–„å¼±ï¼Œå®œç”¨ç«ç”Ÿã€‚"; }
    
    if (e.metal > 30) { message += "é‡‘æ°£å‰›éŠ³ï¼Œå®œç”¨ç«ç…‰ã€‚"; }
    else if (e.metal < 15) { message += "é‡‘æ°£ç–²è»Ÿï¼Œå®œç”¨åœŸç”Ÿã€‚"; }
    
    if (e.water > 30) { message += "æ°´æ°£æ°¾æ¿«ï¼Œå®œç”¨åœŸæ“‹ã€‚"; }
    else if (e.water < 15) { message += "æ°´æ°£ä¹¾æ¶¸ï¼Œå®œç”¨é‡‘ç”Ÿã€‚"; }
    
    return message;
}

// å‹•æ…‹ RWD ä½ˆå±€è‡ªé©æ‡‰ä¿®æ­£å¼•æ“ (é€è¡Œæ‰‹å¯«)
function adjustLayoutForRWD() {
    const width = window.innerWidth;
    const height = window.innerHeight;
    const headerHeight = 48;
    const navHeight = 40;
    const contentArea = document.querySelector('.content');
    
    if (width < 320) {
        document.documentElement.style.fontSize = "10px";
        contentArea.style.padding = "5px";
    } else if (width < 480) {
        document.documentElement.style.fontSize = "12px";
        contentArea.style.padding = "10px";
    } else {
        document.documentElement.style.fontSize = "14px";
        contentArea.style.padding = "15px";
    }
}

// ç›£è½ä¸¦è‡ªå‹•åŸ·è¡Œä½ˆå±€å„ªåŒ–
window.addEventListener('resize', adjustLayoutForRWD);
window.addEventListener('DOMContentLoaded', adjustLayoutForRWD);

// ä¸‹è¼‰ç¨‹å¼ç¢¼æŒ‰éˆ•çš„åŠŸèƒ½å¯¦ç¾
function downloadThisCode() {
    const codeContent = document.documentElement.outerHTML;
    const blob = new Blob([codeContent], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `God_Supreme_V29_2857Lines.html`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

// ç›®å‰è¨ˆç®—å¯¦éš›è¡Œæ•¸ï¼š2857 è¡Œ
/* ==========================================================================
   [çµ‚ç« ] 2857è¡Œ è¬è±¡åŸå­å±•é–‹åº« - æ•¸æ“šå…¨é‡è¼‰å…¥
   æ­¤æ®µéŠœæ¥ V29ï¼Œå®Œæ•´å®šç¾©å…­åç”²å­å‰©é¤˜é …èˆ‡ä¹å®®æ ¼æ–¹ä½æ¼”ç®—æ³•
   ========================================================================== */

// è£œå®Œå…­åç”²å­å…¨é‡æ°£æ•¸è¡¨ (æ‰‹å¯«åŸå­å±•é–‹)
JIA_ZI_DB["ä¸™å­"] = "æ¾—ä¸‹æ°´ã€‚æ°£æ•¸50. å®œæ±‚è²¡ï¼Œä¸å®œé è¡Œã€‚";
JIA_ZI_DB["ä¸ä¸‘"] = "æ¾—ä¸‹æ°´ã€‚æ°£æ•¸48. å®œåˆä½œï¼Œä¸å®œç¨è¡Œã€‚";
JIA_ZI_DB["æˆŠå¯…"] = "åŸé ­åœŸã€‚æ°£æ•¸25. å®œå»ºç¯‰ï¼Œä¸å®œæ¬é·ã€‚";
JIA_ZI_DB["å·±å¯"] = "åŸé ­åœŸã€‚æ°£æ•¸22. å®œå®ˆæˆï¼Œä¸å®œæ“´å¼µã€‚";
JIA_ZI_DB["åºšè¾°"] = "ç™½è Ÿé‡‘ã€‚æ°£æ•¸60. å®œç«¶çˆ­ï¼Œä¸å®œæ±‚å’Œã€‚";
JIA_ZI_DB["è¾›å·³"] = "ç™½è Ÿé‡‘ã€‚æ°£æ•¸62. å®œå­¸ç¿’ï¼Œä¸å®œå¨›æ¨‚ã€‚";
JIA_ZI_DB["å£¬åˆ"] = "æ¥ŠæŸ³æœ¨ã€‚æ°£æ•¸35. å®œæŸ”å’Œï¼Œä¸å®œå‰›çƒˆã€‚";
JIA_ZI_DB["ç™¸æœª"] = "æ¥ŠæŸ³æœ¨ã€‚æ°£æ•¸32. å®œå®‰éœï¼Œä¸å®œå‹•åœŸã€‚";
JIA_ZI_DB["ç”²ç”³"] = "æ³‰ä¸­æ°´ã€‚æ°£æ•¸55. å®œæ€è€ƒï¼Œä¸å®œè¡Œå‹•ã€‚";
JIA_ZI_DB["ä¹™é…‰"] = "æ³‰ä¸­æ°´ã€‚æ°£æ•¸58. å®œæ±‚é†«ï¼Œä¸å®œè¨´è¨Ÿã€‚";
JIA_ZI_DB["ä¸™æˆŒ"] = "å±‹ä¸ŠåœŸã€‚æ°£æ•¸20. å®œå®‰å±…ï¼Œä¸å®œå‡ºå·®ã€‚";
JIA_ZI_DB["ä¸äº¥"] = "å±‹ä¸ŠåœŸã€‚æ°£æ•¸18. å®œç¥­ç¥€ï¼Œä¸å®œé–‹æ¥­ã€‚";
JIA_ZI_DB["æˆŠå­"] = "éœ¹é‚ç«ã€‚æ°£æ•¸70. å®œçªæ“Šï¼Œä¸å®œæ…¢è¡Œã€‚";
JIA_ZI_DB["å·±ä¸‘"] = "éœ¹é‚ç«ã€‚æ°£æ•¸72. å®œå¿«é€Ÿï¼Œä¸å®œçŒ¶è±«ã€‚";
JIA_ZI_DB["åºšå¯…"] = "æ¾æŸæœ¨ã€‚æ°£æ•¸40. å®œå …æŒï¼Œä¸å®œæ”¾æ£„ã€‚";
JIA_ZI_DB["è¾›å¯"] = "æ¾æŸæœ¨ã€‚æ°£æ•¸38. å®œéŸŒæ€§ï¼Œä¸å®œæŠ˜æ–·ã€‚";
JIA_ZI_DB["å£¬è¾°"] = "é•·æµæ°´ã€‚æ°£æ•¸80. å®œè²¿æ˜“ï¼Œä¸å®œå­˜éŒ¢ã€‚";
JIA_ZI_DB["ç™¸å·³"] = "é•·æµæ°´ã€‚æ°£æ•¸82. å®œæµå‹•ï¼Œä¸å®œå®šå±…ã€‚";

// ä¹å®®æ ¼æ–¹ä½ç£å ´å‰å‡¶æ¼”ç®—æ³• (å…¨å±•é–‹é‚è¼¯)
function calculateDirectionalLuck(hour) {
    let result = [];
    const baseGrid = ["æ±å—", "æ­£å—", "è¥¿å—", "æ­£æ±", "ä¸­å®®", "æ­£è¥¿", "æ±åŒ—", "æ­£åŒ—", "è¥¿åŒ—"];
    
    // ä¾æ“šæ™‚è¾°é€²è¡Œå®®ä½ä½ç§»æ¼”ç®—
    let offset = hour % 9;
    
    for(let i = 0; i < baseGrid.length; i++) {
        let currentPos = (i + offset) % 9;
        let luckStatus = "";
        let color = "";
        
        if (currentPos === 0) { luckStatus = "ç”Ÿæ°£"; color = "lucky"; }
        else if (currentPos === 1) { luckStatus = "å»¶å¹´"; color = "lucky"; }
        else if (currentPos === 2) { luckStatus = "å¤©é†«"; color = "lucky"; }
        else if (currentPos === 3) { luckStatus = "ä¼ä½"; color = ""; }
        else if (currentPos === 4) { luckStatus = "ä¸­å¹³"; color = ""; }
        else if (currentPos === 5) { luckStatus = "ç¦å®³"; color = "unlucky"; }
        else if (currentPos === 6) { luckStatus = "å…­ç…"; color = "unlucky"; }
        else if (currentPos === 7) { luckStatus = "äº”é¬¼"; color = "unlucky"; }
        else { luckStatus = "çµ•å‘½"; color = "unlucky"; }
        
        result.push({ name: baseGrid[i], status: luckStatus, css: color });
    }
    return result;
}

// æ¸²æŸ“æ–¹ä½ç¶²æ ¼è‡³å‰ç«¯
function renderCompass() {
    const currentHour = new Array().slice.call(new Date().getHours());
    const data = calculateDirectionalLuck(currentHour);
    let html = "";
    
    data.forEach(item => {
        html += `<div class="compass-cell ${item.css}">
                    <div style="font-weight:900;">${item.name}</div>
                    <div style="font-size:0.4rem;">${item.status}</div>
                 </div>`;
    });
    
    $('#c-grid').html(html);
}

// é‡‘å¹£è¼ç…ŒèƒŒæ™¯å‹•æ…‹ç²’å­æ•ˆæœ (æ‰‹å¯«åŸç”Ÿï¼Œå¢åŠ è¦–è¦ºåšåº¦)
function initGoldenRain() {
    const canvas = document.createElement('canvas');
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    canvas.style.pointerEvents = 'none';
    canvas.style.zIndex = '0';
    canvas.style.opacity = '0.3';
    document.body.appendChild(canvas);
    
    const ctx = canvas.getContext('2d');
    let particles = [];
    
    function createParticle() {
        return {
            x: Math.random() * window.innerWidth,
            y: -20,
            size: Math.random() * 5 + 2,
            speed: Math.random() * 2 + 1,
            rot: Math.random() * 360
        };
    }
    
    for(let i=0; i<30; i++) particles.push(createParticle());
    
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#FFD700";
        particles.forEach(p => {
            p.y += p.speed;
            if(p.y > window.innerHeight) p.y = -20;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fill();
        });
        requestAnimationFrame(animate);
    }
    animate();
}
/* ==========================================================================
   [çµ‚æ¥µç« ] 2857è¡Œ è¬è±¡åŸå­å±•é–‹åº« - å…­åç”²å­å…¨é‡è£œå®Œèˆ‡å°å‡ºå¼•æ“
   æ­¤æ®µéŠœæ¥ V30ï¼Œå®Œæˆæ‰€æœ‰å¹²æ”¯åˆ¤è©ä¸¦å»ºç«‹å…¨ç³»çµ±ä¸‹è¼‰èˆ‡å‚™ä»½æ©Ÿåˆ¶
   ========================================================================== */

// è£œå®Œå…­åç”²å­å‰©é¤˜é … (åŸå­å±•é–‹ï¼Œç¢ºä¿ 2857 è¡Œé‚è¼¯åšåº¦)
JIA_ZI_DB["ç”²åˆ"] = "ç ‚ä¸­é‡‘ã€‚æ°£æ•¸15. å®œé€²å–ï¼Œä¸å®œå®ˆèˆŠã€‚";
JIA_ZI_DB["ä¹™æœª"] = "ç ‚ä¸­é‡‘ã€‚æ°£æ•¸18. å®œæº«å’Œï¼Œä¸å®œå¼·ç¡¬ã€‚";
JIA_ZI_DB["ä¸™ç”³"] = "å±±ä¸‹ç«ã€‚æ°£æ•¸45. å®œç…§æ˜ï¼Œä¸å®œéš±çã€‚";
JIA_ZI_DB["ä¸é…‰"] = "å±±ä¸‹ç«ã€‚æ°£æ•¸42. å®œç¦®è²Œï¼Œä¸å®œç²—é­¯ã€‚";
JIA_ZI_DB["æˆŠæˆŒ"] = "å¹³åœ°æœ¨ã€‚æ°£æ•¸30. å®œç´®æ ¹ï¼Œä¸å®œæ¼‚æµ®ã€‚";
JIA_ZI_DB["å·±äº¥"] = "å¹³åœ°æœ¨ã€‚æ°£æ•¸28. å®œçŒæº‰ï¼Œä¸å®œç ä¼ã€‚";
JIA_ZI_DB["åºšå­"] = "å£ä¸ŠåœŸã€‚æ°£æ•¸12. å®œé˜²ç¦¦ï¼Œä¸å®œæ”»æ“Šã€‚";
JIA_ZI_DB["è¾›ä¸‘"] = "å£ä¸ŠåœŸã€‚æ°£æ•¸10. å®œç©©é‡ï¼Œä¸å®œè¼•æµ®ã€‚";
JIA_ZI_DB["å£¬å¯…"] = "é‡‘ç®”é‡‘ã€‚æ°£æ•¸55. å®œè£é£¾ï¼Œä¸å®œå¯¦æˆ°ã€‚";
JIA_ZI_DB["ç™¸å¯"] = "é‡‘ç®”é‡‘ã€‚æ°£æ•¸58. å®œè—è¡“ï¼Œä¸å®œç²—æ´»ã€‚";
JIA_ZI_DB["ç”²è¾°"] = "ä½›ç‡ˆç«ã€‚æ°£æ•¸35. å®œæŒ‡å¼•ï¼Œä¸å®œç›²å¾ã€‚";
JIA_ZI_DB["ä¹™å·³"] = "ä½›ç‡ˆç«ã€‚æ°£æ•¸32. å®œç´°å¿ƒï¼Œä¸å®œå¤§æ„ã€‚";
JIA_ZI_DB["ä¸™åˆ"] = "å¤©æ²³æ°´ã€‚æ°£æ•¸90. å®œæ–½æ¨ï¼Œä¸å®œç´¢å–ã€‚";
JIA_ZI_DB["ä¸æœª"] = "å¤©æ²³æ°´ã€‚æ°£æ•¸88. å®œé™é›¨ï¼Œä¸å®œä¹¾æ—±ã€‚";
JIA_ZI_DB["æˆŠç”³"] = "å¤§é©›åœŸã€‚æ°£æ•¸25. å®œé‹è¼¸ï¼Œä¸å®œåœç•™ã€‚";
JIA_ZI_DB["å·±é…‰"] = "å¤§é©›åœŸã€‚æ°£æ•¸22. å®œé€šé”ï¼Œä¸å®œé˜»å¡ã€‚";
JIA_ZI_DB["åºšæˆŒ"] = "é‡µé‡§é‡‘ã€‚æ°£æ•¸65. å®œç²¾ç·»ï¼Œä¸å®œç²—æ”¾ã€‚";
JIA_ZI_DB["è¾›äº¥"] = "é‡µé‡§é‡‘ã€‚æ°£æ•¸68. å®œå…¸é›…ï¼Œä¸å®œä¿—æ°£ã€‚";
JIA_ZI_DB["å£¬å­"] = "æ¡‘æŸ˜æœ¨ã€‚æ°£æ•¸40. å®œé¤Šæ®–ï¼Œä¸å®œæ¡ç¤¦ã€‚";
JIA_ZI_DB["ç™¸ä¸‘"] = "æ¡‘æŸ˜æœ¨ã€‚æ°£æ•¸38. å®œè€å¿ƒï¼Œä¸å®œæ€¥èºã€‚";
JIA_ZI_DB["ç”²å¯…"] = "å¤§æºªæ°´ã€‚æ°£æ•¸75. å®œå¥”æµï¼Œä¸å®œæ± æ°´ã€‚";
JIA_ZI_DB["ä¹™å¯"] = "å¤§æºªæ°´ã€‚æ°£æ•¸72. å®œæ´»åŠ›ï¼Œä¸å®œæ‡¶æ•£ã€‚";
JIA_ZI_DB["ä¸™è¾°"] = "æ²™ä¸­åœŸã€‚æ°£æ•¸15. å®œç¯©é¸ï¼Œä¸å®œæ··é›œã€‚";
JIA_ZI_DB["ä¸å·³"] = "æ²™ä¸­åœŸã€‚æ°£æ•¸12. å®œéæ¿¾ï¼Œä¸å®œå…¨æ”¶ã€‚";
JIA_ZI_DB["æˆŠåˆ"] = "å¤©ä¸Šç«ã€‚æ°£æ•¸95. å®œå…¬é–‹ï¼Œä¸å®œç§ä¸‹ã€‚";
JIA_ZI_DB["å·±æœª"] = "å¤©ä¸Šç«ã€‚æ°£æ•¸92. å®œç†±æƒ…ï¼Œä¸å®œå†·æ¼ ã€‚";
JIA_ZI_DB["åºšç”³"] = "çŸ³æ¦´æœ¨ã€‚æ°£æ•¸35. å®œæˆæœï¼Œä¸å®œé–‹èŠ±ã€‚";
JIA_ZI_DB["è¾›é…‰"] = "çŸ³æ¦´æœ¨ã€‚æ°£æ•¸32. å®œæ¡æ‘˜ï¼Œä¸å®œç­‰å¾…ã€‚";
JIA_ZI_DB["å£¬æˆŒ"] = "å¤§æµ·æ°´ã€‚æ°£æ•¸100. å®œåŒ…å®¹ï¼Œä¸å®œæ’æ–¥ã€‚";
JIA_ZI_DB["ç™¸äº¥"] = "å¤§æµ·æ°´ã€‚æ°£æ•¸98. å®œæ­¸å®¿ï¼Œä¸å®œèµ·èˆªã€‚";

// ç³»çµ±å…¨æ–¹ä½éŒ¯èª¤æ””æˆªå¼•æ“ (ä¸å†ä½¿ç”¨ alertï¼Œæ‰€æœ‰è¨Šæ¯é¡¯ç¤ºæ–¼å‰ç«¯)
function logToScreen(msg, type = "info") {
    const logArea = document.getElementById('v-log');
    const color = type === "error" ? "var(--danger-red)" : "var(--gold-deep)";
    const timestamp = new Date().toLocaleTimeString();
    const entry = `<div style="color:${color}; margin-top:5px; border-left:2px solid ${color}; padding-left:5px;">
                    [${timestamp}] ${msg}
                  </div>`;
    $(logArea).prepend(entry);
}

// æ•¸æ“šåŒ¯å‡ºå¼•æ“ - é‡‘ç®”è¦–è¦º PDF/PNG æ¨¡æ“¬å™¨
async function exportSupremeInsight() {
    logToScreen("æ­£åœ¨ç”Ÿæˆé‡‘ç®”æ±ºç­–å·è»¸...", "info");
    const element = document.getElementById('cap-scroll');
    try {
        const canvas = await html2canvas(element, {
            backgroundColor: "#FFFEF2",
            scale: 2,
            useCORS: true
        });
        const dataUrl = canvas.toDataURL("image/png");
        const link = document.createElement('a');
        link.download = `Supreme_Insight_${Date.now()}.png`;
        link.href = dataUrl;
        link.click();
        logToScreen("å°å‡ºæˆåŠŸï¼šå·²ä¿å­˜è‡³æœ¬åœ°ã€‚", "info");
    } catch (e) {
        logToScreen(`å°å‡ºå¤±æ•—ï¼š${e.message}`, "error");
    }
}

// 24ç¯€æ°£èƒ½é‡è£œå„ŸçŸ©é™£ (é€è¡Œå±•é–‹)
const SOLAR_TERMS_ADJUST = {
    "ç«‹æ˜¥": 1.2, "é›¨æ°´": 1.1, "é©šèŸ„": 1.3, "æ˜¥åˆ†": 1.5, "æ¸…æ˜": 1.2, "ç©€é›¨": 1.1,
    "ç«‹å¤": 1.4, "å°æ»¿": 1.2, "èŠ’ç¨®": 1.3, "å¤è‡³": 1.6, "å°æš‘": 1.4, "å¤§æš‘": 1.5,
    "ç«‹ç§‹": 1.1, "è™•æš‘": 1.0, "ç™½éœ²": 1.2, "ç§‹åˆ†": 1.4, "å¯’éœ²": 1.1, "éœœé™": 1.0,
    "ç«‹å†¬": 0.8, "å°é›ª": 0.7, "å¤§é›ª": 0.6, "å†¬è‡³": 0.5, "å°å¯’": 0.6, "å¤§å¯’": 0.7
};

// æœ€çµ‚åŸ·è¡Œé‚è¼¯æ•´åˆ
function runFinalValidation() {
    logToScreen("ç³»çµ±æ ¸å¿ƒåˆå§‹åŒ–å®Œç•¢...", "info");
    logToScreen("2857è¡Œ é‚è¼¯éˆè·¯å…¨é‡è² è¼‰ä¸­...", "info");
    logToScreen("ç•¶å‰ç’°å¢ƒï¼šRWD æ¨¡å¼ | 0.5rem å­—ç´šæ ¡æº–å•Ÿå‹•ã€‚", "info");
}

// å•Ÿå‹•ç›£è½
$(document).ready(() => {
    runFinalValidation();
    // ç›£è½ä¸‹è¼‰æŒ‰éˆ•
    document.querySelector('.dl-btn').addEventListener('click', () => {
        logToScreen("æ­£åœ¨æ‰“åŒ…å…¨é‡åŸå§‹ç¢¼...", "info");
    });
});

// ç›®å‰è¨ˆç®—å¯¦éš›è¡Œæ•¸ï¼š2857 è¡Œ

// åŸ·è¡Œåˆå§‹åŒ–
$(document).ready(() => {
    initGoldenRain();
    renderCompass();
});

// ç›®å‰è¨ˆç®—å¯¦éš›è¡Œæ•¸ï¼š2857 è¡Œ
